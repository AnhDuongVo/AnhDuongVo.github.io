{{/* Read the author referenced by the homepage block; fallback to admin */}}
{{ $author := site.GetPage "authors/admin" }}
{{ with $author.Params.affiliations }}
<style>
  .ad-affiliations-side{display:flex;flex-direction:column;align-items:center;gap:10px;margin-top:12px}
  .ad-affiliations-side img{height:22px;max-width:120px;object-fit:contain;filter:grayscale(100%);opacity:.85;transition:all .2s}
  .ad-affiliations-side a:hover img{filter:none;opacity:1;transform:scale(1.05)}
</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
  // try a few likely sidebar selectors used by Hugo Blox
  const candidates = [
    '.resume-biography .col-lg-4',            // common left column
    '.hb-resume-bio .col-lg-4',
    '.resume-biography .sidebar'
  ];
  let side = null;
  for (const sel of candidates) { side = document.querySelector(sel); if (side) break; }
  if (!side || document.querySelector('.ad-affiliations-side')) return;

  const wrap = document.createElement('div');
  wrap.className = 'ad-affiliations-side';
  wrap.innerHTML = `
    {{ range . -}}
      <a href="{{ .url }}" target="_blank" rel="noopener" aria-label="{{ .name }}">
        <img src="{{ .logo }}" alt="{{ .name }}">
      </a>
    {{- end }}
  `;
  side.appendChild(wrap);
});
</script>
{{ end }}
